
process TEST =
{

#  include "FWCore/MessageLogger/data/MessageLogger.cfi"
   service = MessageLogger {
          untracked vstring destinations = { "cout" }
          untracked vstring debugModules = { "*" }
          untracked PSet cout = {
                        untracked string threshold = "DEBUG"
          }
        }

      source = EmptyIOVSource {
          string timetype = "runnumber"
          untracked uint32 firstRun = 1
	  untracked uint32 lastRun = 1
          uint32 interval = 1
        }

include "SimCalorimetry/EcalTrigPrimProducers/data/ecalTrigPrimESProducer.cff"
    es_source tpparams12 = EmptyESSource {
        string recordName = "EcalTPGPhysicsConstRcd"
        vuint32 firstValid = { 1 }
        bool iovIsRunNotTime = true
    }
    replace EcalTrigPrimESProducer.DatabaseFile="TPG_startup.txt.gz"
    
include "CondCore/DBCommon/data/CondDBCommon.cfi"

# to write in sqlite
#    replace CondDBCommon.connect = "oracle://ecalh4db/test02"    
#    replace CondDBCommon.connect = "oracle://ecalh4db/test01"    
#    replace CondDBCommon.connect = "oracle://ecalh4db/TEST02"
     replace CondDBCommon.connect = "sqlite_file:DB.db" 
#     replace CondDBCommon.DBParameters.authenticationPath="."


# to write into int2r_orcoff
#    replace CondDBCommon.connect = "oracle://cms_orcoff_int2r/CMS_COND_ECAL"
#    replace CondDBCommon.catalog = "relationalcatalog_oracle://cms_orcoff_int2r/CMS_COND_GENERAL"
#    replace CondDBCommon.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"    

    service = PoolDBOutputService
    {
        untracked uint32 messagelevel = 3 
        using CondDBCommon
	untracked string catalog = "file:PoolFileCatalog_DB.xml"
         VPSet toPut = { 
            { 
               string record = "EcalTPGPedestalsRcd" 
               string tag = "EcalTPGPedestals_craft" 
            },
            { 
               string record = "EcalTPGLinearizationConstRcd" 
               string tag = "EcalTPGLinearizationConst_craft" 
            },
            { 
               string record = "EcalTPGSlidingWindowRcd" 
               string tag = "EcalTPGSlidingWindow_craft" 
           },
            { 
               string record = "EcalTPGFineGrainEBIdMapRcd" 
              string tag = "EcalTPGFineGrainEBIdMap_craft" 
            },
            { 
               string record = "EcalTPGFineGrainStripEERcd" 
               string tag = "EcalTPGFineGrainStripEE_craft" 
            },
            { 
               string record = "EcalTPGFineGrainTowerEERcd" 
               string tag = "EcalTPGFineGrainTowerEE_craft" 
            },
            { 
               string record = "EcalTPGLutIdMapRcd" 
               string tag = "EcalTPGLutIdMap_craft" 
            },
            { 
               string record = "EcalTPGWeightIdMapRcd" 
               string tag = "EcalTPGWeightIdMap_craft" 
            },
            { 
               string record = "EcalTPGWeightGroupRcd" 
               string tag = "EcalTPGWeightGroup_craft" 
            },
            { 
               string record = "EcalTPGLutGroupRcd" 
               string tag = "EcalTPGLutGroup_craft" 
            },
            { 
               string record = "EcalTPGFineGrainEBGroupRcd" 
               string tag = "EcalTPGFineGrainEBGroup_craft" 
            },
            { 
               string record = "EcalTPGPhysicsConstRcd" 
               string tag = "EcalTPGPhysicsConst_craft" 
            }
   
	}

    }

    module dbCopy = EcalTPGDBCopy
    {
        string timetype = "runnumber"
        VPSet toCopy=
        {
	    {
		string container = "EcalTPGPedestals"
		string record = "EcalTPGPedestalsRcd"
	    },
            {
               string container = "EcalTPGLinearizationConst"
               string record = "EcalTPGLinearizationConstRcd"
            },
            {
                string container = "EcalTPGSlidingWindow"
                string record = "EcalTPGSlidingWindowRcd"
            },
            {
                string container = "EcalTPGFineGrainEBIdMap"
                string record = "EcalTPGFineGrainEBIdMapRcd"
            },
  	    {
                string container = "EcalTPGFineGrainStripEE"
                string record = "EcalTPGFineGrainStripEERcd"
            },
  	    {
                string container = "EcalTPGFineGrainTowerEE"
                string record = "EcalTPGFineGrainTowerEERcd"
            },
            {
                string container = "EcalTPGLutIdMap"
                string record = "EcalTPGLutIdMapRcd"
            },
            {
               string container = "EcalTPGWeightIdMap"
               string record = "EcalTPGWeightIdMapRcd"
            },
            {
                string container = "EcalTPGWeightGroup"
                string record = "EcalTPGWeightGroupRcd"
            },
            {
                string container = "EcalTPGLutGroup"
                string record = "EcalTPGLutGroupRcd"
            },
            {
                string container = "EcalTPGFineGrainEBGroup"
                string record = "EcalTPGFineGrainEBGroupRcd"
            },
            {
                string container = "EcalTPGPhysicsConst"
                string record = "EcalTPGPhysicsConstRcd"
            }
        }
    }

#  module prod = EcalTrivialObjectAnalyzer{}

#   path p = { prod, dbCopy}
   path p = { dbCopy}

}
